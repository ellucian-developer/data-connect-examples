# Trigger by Event Pipelines: Consuming and processing Business Events on Data Connect (BETA)

This repository provides a sample pipeline demonstrating how to use Data Connect to automate processes triggered by business events in Banner. The example focuses on updating a student's residency code and notifying the student when this change occurs.

**Data Connect plays a central role in enabling seamless, event-driven automation across Banner and related systems.** By leveraging Data Connect, you can quickly build, deploy, and manage integrations that respond to real-time business events—without the need for custom code or manual intervention.

In this scenario, a business event is triggered after a student's residency code for a specific term is updated in Banner. The pipeline listens for this event, gathers relevant student information, and sends a notification email.

> **Note:** You must have the business event configured in Banner Event Publisher (BEP) and a subscriber application set up in Ethos Integration, subscribed to the corresponding event.

---

## Pipelines Included

* `notify-on-residency-code-changed` – Consumes and processes the business event, then notifies the affected student.

---

## Prerequisites

You will need:

* Experience Premium with Integration Designer
* Banner system access
* A verified email address for sending notifications

---

## Pipeline Details

### `notify-on-residency-code-changed`

This pipeline performs the following steps:

1. Consumes the relevant business event.
2. Retrieves residency type information for filtering.
3. Gathers student details (name, email, residency type).
4. Sends a notification email to the student.
5. Confirms the business event.

**Sample Email Template:**
- Student name
- New residency type
- Notification about impact on registration fees

---

## Execution Instructions

1. **Configure the Business Event and Connect Additional Data (in BEP):**  
   In Banner Event Publisher (BEP), set up a business event to listen for changes to the residency code field (`SGBSTDN_RESD_CODE`) in the `SGBSTDN` table.  
   Also, ensure the event includes additional data fields for student email (`GOREMAL_EMAIL_ADDRESS`), first name (`SPRIDEN_FIRST_NAME`), and last name (`SPRIDEN_LAST_NAME`).

2. **Subscribe to the Event:**  
   Set up a subscriber application in Ethos Integration and subscribe to the business event from the appropriate Banner instance.

3. **Create and Publish the Pipeline:**  
   Use Integration Designer to create and publish the pipeline. The pipeline is already configured to use two parameters: one for the Ethos API key and one for the sender email address for outgoing notifications. To use the Trigger by Event feature, the pipeline must include the Ethos Consume Event and Ethos Consume Confirm fittings, which enable business event consumption, processing, and confirmation. 

4. **Configure the Job:**  
   In Integration Packages, create a new job for the pipeline.  
   When setting up the job, you will be prompted to provide values for both the Ethos API key of the subscriber application and the sender email address parameters.  
   Set the job to be triggered by the event and configure completion alerts as needed.

Once configured, whenever a student's residency code is assigned for the first time for a specific term, the business event will trigger and the pipeline job will execute automatically.

---

## Pipeline Outputs

Below are sample outputs generated by the pipeline:

![Pipeline Output 1 - Email Sent](../docs/Notify%20on%20Residency%20Code%20Changed%20Email%20Output%20Sample.png)

---

## Other Use Cases

This pipeline pattern is especially useful in higher education for automating workflows, such as:

- Notifying students of changes to academic status
- Alerting staff to critical updates
- Automating compliance or reporting processes

---

## Conclusion

This example demonstrates how event-driven pipelines, powered by Data Connect, can streamline communication and automate business processes in Banner environments. Data Connect makes it easy to build robust, scalable automations that respond instantly to changes in your data.