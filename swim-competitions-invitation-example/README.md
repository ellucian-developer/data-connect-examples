# Personalized HTML File Generation and Email Pipelines

This repository contains a set of sample pipelines that demonstrate how to use Data Connect to generate personalized HTML files and send them as email attachments. The approach supports one-to-many relationships (e.g., one player with multiple competitions) and is suitable for personalized communications across various domains.

In this demonstration, we use a swim team scenario as the main example, where each player receives a custom HTML invitation listing their assigned competitions. However, this structure can be easily adapted for other use cases requiring similar personalization.

## Pipelines Included

* `swim-team-roster-table` – Creates the `team_roster` table to store player details (name, contact info, etc.) and populates it with sample data.
* `swim-team-competitions-table` – Creates the `player_competitions` table to store which competitions each player is assigned to and populate with sample data. (1 to many relationships are set here since each player can be related to any number of competitions).
* `swim-team-send-player-invitations` – Pipeline that generates personalized HTML invitations based on actual team and competition data, stores the file, and emails it to each player.
* `swim-team-send-player-invitations-mock` – Ppipeline that simulates the entire process using generated test data for development or testing purposes.

---

## Prerequisites

You must have the following:

* Experience Premium with Integration Designer
* Insights with the Extensibility license to create custom transformations
* Access to real or test data for team members and their associated competitions
* Verified email that will be used to send emails. 

---

## Pipeline Details

### **1. `swim-team-roster-table`**
Creates the `team_roster` table with fields such as player name, email address, and team metadata. It also populates the table with example data to support testing or demonstration.

### **2. `swim-team-competitions-table`**
Creates the `player_competitions` table with player-to-competition mappings. It demonstrates a one-to-many relationship, where each player may have multiple assigned competitions. The pipeline also populates this table with sample entries.

### **3. `swim-team-send-player-invitations`**
This is the main production pipeline that:

- Joins player and competition data from `team_roster` and `player_competitions`
- Aggregates competitions per player
- Formats data using an HTML template
- Saves the file to a storage location (e.g., S3)
- Emails each player their invitation with the HTML attached

**Email Template Example**:
- Player’s name
- List of competitions
- Event dates and details
- Optional footer with coach or team info

### **4. `swim-team-send-player-invitations-mock`**
This is a fully functional test version of the real pipeline. It:

- Generates synthetic players and competitions
- Mimics the aggregation, HTML formatting, and email sending logic
- Is useful for end-to-end testing or development without affecting real users

---

## Execution Instructions

For table-creation pipelines (`swim-team-roster-table` and `swim-team-competitions-table`):

- Use the **Test** button in Integration Designer to create and populate the database artifacts.

For email pipelines:

- **Mock pipeline**: Use the **Test** button to simulate and verify email generation with mock data.
- **Real pipeline**: Populate the tables with real data, then **Publish** the pipeline and run it from the **Integration Packages** interface. Emails will be sent to actual recipients with personalized attachments.

---

## Email Details

**Subject**:  
`You're Invited – {{message.header.player.name}}`

**Body**:  
Includes:
- Greeting and context
- Player-specific information
- Summary of competitions
- Optional call to action

**Attachment**:  
Personalized HTML file with the player's competition assignments with dynamic details.

---

## Pipeline Outputs

Below are some sample outputs generated by the pipeline. 

![Pipeline Output 1 - Email Sent](../docs/Swim%20Competition%20Invitation%20Email%20Output%20Sample.png)
![Pipeline Output 2 - HTML Generated Invitation File](../docs/Swim%20Competition%20Invitation%20Leter%20Output%20Sample.png)

---

## Other Use Cases

This pipeline pattern is particularly useful in higher education settings where personalized documents must reflect **one-to-many relationships**—for example, one student related to many courses, awards, or events. Examples include:

- **Course Registration Summaries** – One student with many registered courses; generate an individualized schedule including course names, times, and instructors.
- **Academic Advising Reports** – One student with multiple degree requirements or advisor comments; compile all relevant insights into a single report.
- **Financial Aid Notifications** – One student with multiple aid items (grants, loans, scholarships); create a single document summarizing their complete financial aid package.
- **Event Invitations** – One participant invited to several event sessions or activities; send an agenda listing their personalized itinerary.
- **Internship or Career Fair Invitations** – One student matched with several employers or sessions based on major or interest; send a tailored list of meetings or booths to visit.
- **Scholarship Application Status** – One applicant with multiple submitted applications or responses from different scholarship committees; compile all updates in one personalized message.

---

## Conclusion

These pipelines provide a reusable and scalable approach for creating and sending personalized HTML content via email. The swim team example demonstrates a clear and extensible use case, and the pattern can be readily adapted for other domains where one-to-many relationships and individualized communication are needed.

By leveraging Data Connect’s transformation tools and extensibility features, institutions can easily personalize messages with dynamic data, automate complex reporting workflows, and scale communication efforts across various departments and audiences.